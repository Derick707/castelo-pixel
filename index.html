<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <title>Pixel Castle Menu</title>
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <style>
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; background: #000; overflow: hidden; font-family: 'Press Start 2P', cursive; }
        #container {
            position: relative; width: 100vw; height: 100vh;
            background: url('background.png') no-repeat center center;
            background-size: contain; image-rendering: pixelated;
        }
        canvas { position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; }
        #menu { position: absolute; right: 10%; top: 45%; color: white; }
        .option { font-size: 1.2vw; margin: 20px 0; display: flex; align-items: center; text-shadow: 2px 2px #000; opacity: 0.7; }
        .active { opacity: 1; transform: scale(1.1); }
        .cursor { margin-right: 15px; visibility: hidden; }
        .active .cursor { visibility: visible; animation: blink 0.5s infinite; }
        @keyframes blink { 0% { opacity: 0; } 100% { opacity: 1; } }
    </style>
</head>
<body>
    <div id="container">
        <canvas id="chuva"></canvas>
        <div id="menu">
            <div class="option active"><span class="cursor">></span>1 PLAYER</div>
            <div class="option"><span class="cursor">></span>2 PLAYERS</div>
            <div class="option"><span class="cursor">></span>EXIT</div>
        </div>
    </div>
    <script>
        const canvas = document.getElementById('chuva');
        const ctx = canvas.getContext('2d');
        const opts = document.querySelectorAll('.option');
        let idx = 0; let audio = null;

        function resize() { canvas.width = window.innerWidth; canvas.height = window.innerHeight; }
        window.onresize = resize; resize();

        let gotas = [];
        for(let i=0; i<100; i++) gotas.push({x: Math.random()*canvas.width, y: Math.random()*canvas.height, v: Math.random()*10+5});

        function loop() {
            ctx.clearRect(0,0,canvas.width, canvas.height);
            ctx.fillStyle = "rgba(150, 150, 255, 0.3)";
            gotas.forEach(g => { ctx.fillRect(g.x, g.y, 2, 8); g.y += g.v; if(g.y > canvas.height) g.y = -10; });
            requestAnimationFrame(loop);
        }
        loop();

        window.addEventListener('keydown', (e) => {
            opts[idx].classList.remove('active');
            if(e.key === "ArrowUp") idx = idx > 0 ? idx - 1 : 2;
            if(e.key === "ArrowDown") idx = idx < 2 ? idx + 1 : 0;
            opts[idx].classList.add('active');
            if(audio) som(150, 0.1, 'square');
        });

        window.onclick = () => {
            if(audio) return;
            audio = new AudioContext();
            setInterval(() => {
                const notas = [55, 48, 52, 41]; 
                som(notas[Math.floor(Math.random()*notas.length)], 1.5, 'sawtooth');
            }, 1200);
        };

        function som(f, d, t) {
            const o = audio.createOscillator(); const g = audio.createGain();
            o.type = t; o.frequency.value = f;
            g.gain.setValueAtTime(0.05, audio.currentTime);
            g.gain.exponentialRampToValueAtTime(0.0001, audio.currentTime + d);
            o.connect(g); g.connect(audio.destination);
            o.start(); o.stop(audio.currentTime + d);
        }
    </script>
</body>
</html>

